{"ast":null,"code":"import _slicedToArray from \"C:/Users/Rafa/Desktop/Swenglish/SwenglishApp-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"C:/Users/Rafa/Desktop/Swenglish/SwenglishApp-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Rafa\\\\Desktop\\\\Swenglish\\\\SwenglishApp-master\\\\src\\\\index.tsx\",\n    _s = $RefreshSig$();\n\nimport \"./styles.scss\";\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { Machine, assign, send } from \"xstate\";\nimport { useMachine, asEffect } from \"@xstate/react\";\nimport { inspect } from \"@xstate/inspect\";\nimport { dmMachine } from \"./dmSwenglish\";\nimport Background from \"./Pictures_game/Background.jpg\";\ninspect({\n  url: \"https://statecharts.io/inspect\",\n  iframe: false\n});\nimport { useSpeechSynthesis, useSpeechRecognition } from 'react-speech-kit';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet counterScore = 0;\nlet counterTimeout = 0;\nconst machine = Machine({\n  id: 'root',\n  type: 'parallel',\n  states: {\n    dm: _objectSpread({}, dmMachine),\n    asrtts: {\n      initial: 'idle',\n      states: {\n        idle: {\n          on: {\n            LISTEN: 'recognising',\n            SPEAK: {\n              target: 'speaking',\n              actions: assign((_context, event) => {\n                return {\n                  ttsAgenda: event.value\n                };\n              })\n            }\n          }\n        },\n        recognising: {\n          initial: 'progress',\n          entry: 'recStart',\n          exit: 'recStop',\n          on: {\n            ASRRESULT: {\n              actions: ['recLogResult', assign((_context, event) => {\n                return {\n                  recResult: event.value\n                };\n              })],\n              target: '.match'\n            },\n            RECOGNISED: 'idle',\n            NEXT_WORD: {\n              actions: assign(context => {\n                if (context.score) {\n                  return {\n                    score: context.score + 1\n                  };\n                } else {\n                  return {\n                    score: counterScore + 1\n                  };\n                }\n              }),\n              target: 'idle'\n            },\n            TIMEOUT: {\n              actions: assign(context => {\n                if (context.count) {\n                  return {\n                    count: context.count + 1\n                  };\n                } else {\n                  return {\n                    count: counterTimeout + 1\n                  };\n                }\n              }),\n              target: 'idle'\n            }\n          },\n          states: {\n            progress: {},\n            match: {\n              entry: send('RECOGNISED')\n            }\n          }\n        },\n        speaking: {\n          entry: 'ttsStart',\n          on: {\n            ENDSPEECH: 'idle'\n          }\n        }\n      }\n    }\n  }\n}, {\n  actions: {\n    recLogResult: context => {\n      /* context.recResult = event.recResult; */\n      console.log('<< ASR: ' + context.recResult);\n    },\n    test: () => {\n      console.log('test');\n    },\n    logIntent: context => {\n      /* context.nluData = event.data */\n      console.log('<< NLU intent: ' + context.nluData.intent.name);\n    }\n  }\n});\n\nconst ReactiveButton = props => {\n  switch (true) {\n    case props.state.matches({\n      asrtts: 'recognising'\n    }):\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: props.state.context.recResult\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", _objectSpread(_objectSpread({\n          type: \"button\",\n          className: \"glow-on-hover\",\n          style: {\n            animation: \"glowing 20s linear\"\n          }\n        }, props), {}, {\n          children: \"Listening...\"\n        }), void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 21\n      }, this);\n\n    case props.state.matches({\n      asrtts: 'speaking'\n    }):\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: props.state.context.recResult\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", _objectSpread(_objectSpread({\n          type: \"button\",\n          className: \"glow-on-hover\",\n          style: {\n            animation: \"bordering 1s infinite\"\n          }\n        }, props), {}, {\n          children: \"Speaking...\"\n        }), void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }, this);\n\n    default:\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: props.state.context.recResult\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", _objectSpread(_objectSpread({\n          type: \"button\",\n          className: \"glow-on-hover\"\n        }, props), {}, {\n          children: \"Click to start\"\n        }), void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }, this);\n  }\n};\n\n_c = ReactiveButton;\n\nfunction App() {\n  _s();\n\n  const _useSpeechSynthesis = useSpeechSynthesis({\n    onEnd: () => {\n      send('ENDSPEECH');\n    }\n  }),\n        speak = _useSpeechSynthesis.speak,\n        cancel = _useSpeechSynthesis.cancel,\n        speaking = _useSpeechSynthesis.speaking;\n\n  const _useSpeechRecognition = useSpeechRecognition({\n    onResult: result => {\n      send({\n        type: \"ASRRESULT\",\n        value: result\n      });\n    }\n  }),\n        listen = _useSpeechRecognition.listen,\n        listening = _useSpeechRecognition.listening,\n        stop = _useSpeechRecognition.stop;\n\n  const _useMachine = useMachine(machine, {\n    devTools: true,\n    actions: {\n      recStart: asEffect(() => {\n        console.log('Ready to receive a color command.');\n        listen({\n          interimResults: false,\n          continuous: true,\n          language: 'sv-Se'\n        });\n      }),\n      recStop: asEffect(() => {\n        console.log('Recognition stopped.');\n        stop();\n      }),\n      ttsStart: asEffect((context, effect) => {\n        console.log('Speaking...');\n        speak({\n          text: context.ttsAgenda\n        });\n      }),\n      ttsCancel: asEffect((context, effect) => {\n        console.log('TTS STOP...');\n        cancel();\n      })\n      /* speak: asEffect((context) => {\n      * console.log('Speaking...');\n       *     speak({text: context.ttsAgenda })\n       * } */\n\n    }\n  }),\n        _useMachine2 = _slicedToArray(_useMachine, 3),\n        current = _useMachine2[0],\n        send = _useMachine2[1],\n        service = _useMachine2[2];\n\n  let shown_picture = Background;\n\n  if (current.context.picture) {\n    shown_picture = current.context.picture;\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: /*#__PURE__*/_jsxDEV(ReactiveButton, {\n        state: current,\n        onClick: () => send('CLICK')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: shown_picture\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 18\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 183,\n    columnNumber: 9\n  }, this);\n}\n\n_s(App, \"RIIO137itlHAPnsUEd30120dxYQ=\", false, function () {\n  return [useSpeechSynthesis, useSpeechRecognition, useMachine];\n});\n\n_c2 = App;\n;\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render( /*#__PURE__*/_jsxDEV(App, {}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 196,\n  columnNumber: 5\n}, this), rootElement);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ReactiveButton\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"sources":["C:/Users/Rafa/Desktop/Swenglish/SwenglishApp-master/src/index.tsx"],"names":["React","ReactDOM","Machine","assign","send","useMachine","asEffect","inspect","dmMachine","Background","url","iframe","useSpeechSynthesis","useSpeechRecognition","counterScore","counterTimeout","machine","id","type","states","dm","asrtts","initial","idle","on","LISTEN","SPEAK","target","actions","_context","event","ttsAgenda","value","recognising","entry","exit","ASRRESULT","recResult","RECOGNISED","NEXT_WORD","context","score","TIMEOUT","count","progress","match","speaking","ENDSPEECH","recLogResult","console","log","test","logIntent","nluData","intent","name","ReactiveButton","props","state","matches","animation","App","onEnd","speak","cancel","onResult","result","listen","listening","stop","devTools","recStart","interimResults","continuous","language","recStop","ttsStart","effect","text","ttsCancel","current","service","shown_picture","picture","rootElement","document","getElementById","render"],"mappings":"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","sourcesContent":["import \"./styles.scss\";\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { Machine, assign, send, State } from \"xstate\";\nimport { useMachine, asEffect } from \"@xstate/react\";\nimport { inspect } from \"@xstate/inspect\";\nimport { dmMachine } from \"./dmSwenglish\";\nimport Background from \"./Pictures_game/Background.jpg\";\n\n\ninspect({\n    url: \"https://statecharts.io/inspect\",\n    iframe: false\n});\n\nimport { useSpeechSynthesis, useSpeechRecognition } from 'react-speech-kit';\n\nlet counterScore = 0\nlet counterTimeout = 0\n\nconst machine = Machine<SDSContext, any, SDSEvent>({\n    id: 'root',\n    type: 'parallel',\n    states: {\n        dm: {\n            ...dmMachine\n        },\n        asrtts: {\n            initial: 'idle',\n            states: {\n                idle: {\n                    on: {\n                        LISTEN: 'recognising',\n                        SPEAK: {\n                            target: 'speaking',\n                            actions: assign((_context, event) => { return { ttsAgenda: event.value } })\n                        }\n                    }\n                },\n                recognising: {\n                    initial: 'progress',\n                    entry: 'recStart',\n                    exit: 'recStop',\n                    on: {\n                        ASRRESULT: {\n                            actions: ['recLogResult',\n                                assign((_context, event) => { return { recResult: event.value } })],\n                            target: '.match'\n                        },\n                        RECOGNISED: 'idle',\n                        NEXT_WORD: {\n                            actions: assign((context) => {\n                                if (context.score) {return {score: context.score +1,}}\n                                else {return {score: counterScore +1}}\n                            }),\n                            target: 'idle'\n                        },\n                        TIMEOUT: {\n                            actions: assign((context) => {\n                                if (context.count) {return {count: context.count +1,}}\n                                else {return {count: counterTimeout +1,}}\n                            }),\n                            target: 'idle'\n                        }\n                    },\n                    states: {\n                        progress: {},\n                        match: {\n                            entry: send('RECOGNISED'),\n                        },\n                    }\n                },\n                speaking: {\n                    entry: 'ttsStart',\n                    on: {\n                        ENDSPEECH: 'idle',\n                    }\n                }\n            }\n        }\n    },\n},\n    {\n        actions: {\n            recLogResult: (context: SDSContext) => {\n                /* context.recResult = event.recResult; */\n                console.log('<< ASR: ' + context.recResult);\n            },\n            test: () => {\n                console.log('test')\n            },\n            logIntent: (context: SDSContext) => {\n                /* context.nluData = event.data */\n                console.log('<< NLU intent: ' + context.nluData.intent.name)\n            }\n        },\n    });\n\n\ninterface Props extends React.HTMLAttributes<HTMLElement> {\n    state: State<SDSContext, any, any, any>;\n}\nconst ReactiveButton = (props: Props): JSX.Element => {\n    switch (true) {\n        case props.state.matches({ asrtts: 'recognising' }):\n            return (<div>                \n                <p>{props.state.context.recResult}</p>\n    \n                <button type=\"button\" className=\"glow-on-hover\"\n                    style={{ animation: \"glowing 20s linear\" }} \n\n                    {...props}>\n                    Listening...\n                </button>\n                </div>\n            );\n        case props.state.matches({ asrtts: 'speaking' }\n        ):\n            return (<div>\n                <p>{props.state.context.recResult}</p>\n                <button type=\"button\" className=\"glow-on-hover\"\n                    style={{ animation: \"bordering 1s infinite\" }} {...props}>\n                    Speaking...\n                </button></div>\n            );\n        default:\n            return (\n                <div>\n                <p>{props.state.context.recResult}</p>\n                <button type=\"button\" className=\"glow-on-hover\" {...props}>\n                    Click to start\n                </button >\n                </div>\n            );\n    }\n}\n\nfunction App() {\n    const { speak, cancel, speaking } = useSpeechSynthesis({\n        onEnd: () => {\n            send('ENDSPEECH');\n        },\n    });\n    const { listen, listening, stop } = useSpeechRecognition({\n        onResult: (result: any) => {\n            send({ type: \"ASRRESULT\", value: result });\n        },\n    });\n    const [current, send, service] = useMachine(machine, {\n        devTools: true,\n        actions: {\n            recStart: asEffect(() => {\n                console.log('Ready to receive a color command.');\n                listen({\n                    interimResults: false,\n                    continuous: true,\n                    language: 'sv-Se'\n                });\n            }),\n            recStop: asEffect(() => {\n                console.log('Recognition stopped.');\n                stop()\n            }),\n            ttsStart: asEffect((context, effect) => {\n                console.log('Speaking...');\n                speak({ text: context.ttsAgenda })\n            }),\n            ttsCancel: asEffect((context, effect) => {\n                console.log('TTS STOP...');\n                cancel()\n            })\n            /* speak: asEffect((context) => {\n\t     * console.log('Speaking...');\n             *     speak({text: context.ttsAgenda })\n             * } */\n        }\n    });\n\n    let shown_picture = Background;\n    if (current.context.picture) {shown_picture = current.context.picture}\n    \n    return (\n        <div className=\"App\">\n        <h1>\n        <   ReactiveButton state={current} onClick={() => send('CLICK')} />\n        </h1>\n        <h2>\n            <div><img src={shown_picture}/></div>\n        </h2>\n        </div>\n    )\n};\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n    <App />,\n    rootElement);"]},"metadata":{},"sourceType":"module"}