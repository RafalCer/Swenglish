{"ast":null,"code":"import _objectSpread from\"C:/Users/R/Desktop/DialogueSystems/Lab2/react-xstate-colourchanger/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{send,assign,actions}from\"xstate\";export function say(text){return send(_context=>({type:\"SPEAK\",value:text}));}export function listen(){return send('LISTEN');}function say_ask_nomatch_timeout(say_this,help_message){return{initial:'prompt',states:{prompt:{entry:say_this,on:{ENDSPEECH:'ask1'}},ask1:{entry:[send('LISTEN'),send('TIMEOUT1',{delay:4500,id:'time1'})]},ask2:{entry:[send('LISTEN'),send('TIMEOUT2',{delay:4500,id:'time2'})]},ask3:{entry:[send('LISTEN'),send('TIMEOUT3',{delay:4500,id:'time3'})]},ask4:{entry:[send('LISTEN'),send('TIMEOUT4',{delay:4500,id:'time4'})]},nomatch:{entry:say('Sorry, I did not manage to understand this one. Please repeat.'),on:{ENDSPEECH:\"ask2\"}},timeout1:{entry:say('I did not hear you this time, please speak louder.'),on:{ENDSPEECH:\"ask2\"}},timeout2:{entry:say('I still cannot hear you, please try again.'),on:{ENDSPEECH:\"ask3\"}},timeout3:{entry:say('Sorry, still nothing.'),on:{ENDSPEECH:\"ask4\"}},timeout4:{//Add idle state after 3 reprompts//\nentry:say('Returning to idle.'),on:{ENDSPEECH:\"idle\"}},idle:{type:'final'},to_do:{entry:say('Sorry, this tool has not been developed yet. I will now return to idle state.'),on:{ENDSPEECH:'idle'}},specific:{entry:say(\"Please be more specific\"),on:{ENDSPEECH:\"ask2\"}},canceled:{entry:say(\"Your appointment has been canceled. I will now returnto idle state.\")},help:{entry:say(help_message),on:{ENDSPEECH:\"ask2\"}}}};}const proxyurl=\"https://cors-anywhere.herokuapp.com/\";const rasaurl='https://rafalappointment.herokuapp.com/model/parse';const nluRequest=text=>fetch(new Request(proxyurl+rasaurl,{method:'POST',headers:{'Origin':'http://maraev.me'},// only required with proxy\nbody:\"{\\\"text\\\": \\\"\".concat(text,\"\\\"}\")})).then(data=>data.json());const grammar={\"John\":{person:\"John Appleseed\"},\"John Appleseed\":{person:\"John Appleseed\"},\"Jack\":{person:\"Jack Jackson\"},\"Jack Jackson\":{person:\"Jack Jackson\"},\"Liana\":{person:\"Liana Jelena\"},\"Liana Jelena\":{person:\"Liana Jelena\"},\"Natalie\":{person:\"Natalie Portman\"},\"Natalie Portman\":{person:\"Natalie Portman\"},\"Bruce\":{person:\"Bruce W\"},\"Bob\":{person:\"Bob the builder\"},\"Bob the builder\":{person:\"Bob the builder\"},\"Shrek\":{person:\"Shrek from the swamp\"},\"Shrek from the swap\":{person:\"Shrek from the swamp\"},\"on Monday\":{day:\"Monday\"},\"Monday\":{day:\"Monday\"},\"on Tuesday\":{day:\"Tuesday\"},\"Tuesday\":{day:\"Tuesday\"},\"on Wednesday\":{day:\"Wednesday\"},\"Wednesday\":{day:\"Wednesday\"},\"on Thursday\":{day:\"Thursday\"},\"Thursday\":{day:\"Thursday\"},\"on Friday\":{day:\"Friday\"},\"Friday\":{day:\"Friday\"},\"on Satudary\":{day:\"Satuday\"},\"Satudary\":{day:\"Satuday\"},\"on Sunday\":{day:\"Sunday\"},\"Sunday\":{day:\"Sunday\"},\"10\":{time:\"10:00\"},\"at 10\":{time:\"10:00\"},\"ten\":{time:\"10:00\"},\"at ten\":{time:\"10:00\"},\"11\":{time:\"11:00\"},\"eleven\":{time:\"11:00\"},\"at 11\":{time:\"11:00\"},\"at eleven\":{time:\"11:00\"},\"12\":{time:\"12:00\"},\"twelve\":{time:\"12:00\"},\"at 12\":{time:\"12:00\"},\"at twelve\":{time:\"12:00\"},\"13\":{time:\"13:00\"},\"thirteen\":{time:\"13:00\"},\"at 13\":{time:\"13:00\"},\"at thirteen\":{time:\"13:00\"},\"14\":{time:\"14:00\"},\"fourteen\":{time:\"14:00\"},\"at 14\":{time:\"14:00\"},\"at fourteen\":{time:\"14:00\"},\"15\":{time:\"15:00\"},\"fifteen\":{time:\"15:00\"},\"at 15\":{time:\"15:00\"},\"at fifteen\":{time:\"15:00\"},\"16\":{time:\"16:00\"},\"sixteen\":{time:\"16:00\"},\"at 16\":{time:\"16:00\"},\"at sixteen\":{time:\"16:00\"},\"17\":{time:\"17:00\"},\"seventeen\":{time:\"17:00\"},\"at 17\":{time:\"17:00\"},\"at seventeen\":{time:\"17:00\"},\"18\":{time:\"18:00\"},\"eighteen\":{time:\"18:00\"},\"at 18\":{time:\"18:00\"},\"at eighteen\":{time:\"18:00\"},\"19\":{time:\"19:00\"},\"nineteen\":{time:\"19:00\"},\"at 19\":{time:\"19:00\"},\"at nineteen\":{time:\"19:00\"},\"20\":{time:\"20:00\"},\"twenty\":{time:\"20:00\"},\"at 20\":{time:\"20:00\"},\"at twenty\":{time:\"20:00\"},\"help\":{help:\"help\"},\"help me\":{help:\"help\"},\"Help\":{help:\"help\"},\"Help me\":{help:\"help\"}};const boolean_grammar={\"yes\":{agreement:Boolean(true)},\"of course\":{agreement:Boolean(true)},\"sure\":{agreement:Boolean(true)},\"absolutely\":{agreement:Boolean(true)},\"yes please\":{agreement:Boolean(true)},\"no\":{disagreement:Boolean(false)},\"no way\":{disagreement:Boolean(false)},\"absolutely not\":{disagreement:Boolean(false)},\"never\":{disagreement:Boolean(false)},\"maybe\":{uncertain:\"unsure\"},\"perhaps\":{uncertain:\"unsure\"},\"I don't know\":{uncertain:\"unsure\"},\"probably\":{uncertain:\"unsure\"}};const cancel=actions.cancel;export const dmMachine={initial:'start_point',states:{start_point:{id:'starting_poing',on:{CLICK:'appointment'}},appointment:{initial:'prompt',on:{ENDSPEECH:'who'},states:{prompt:{entry:say(\"Let's create an appointment.\")}}},who:_objectSpread({initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"person\"in(grammar[context.recResult]||{}),actions:[assign(context=>{return{person:grammar[context.recResult].person};}),cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\"day\"},{cond:context=>\"help\"in(grammar[context.recResult]||{}),actions:[cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\".help\"},{target:\".nomatch\"}],TIMEOUT1:'.timeout1',TIMEOUT2:'.timeout2',TIMEOUT3:'.timeout3',TIMEOUT4:'.timeout4'}},say_ask_nomatch_timeout(say('Who are you meeting with?'),\"Please specify the name of the person you are planning to meet up with. Pick someone from your contacts list.\")),day:_objectSpread({initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"day\"in(grammar[context.recResult]||{}),actions:[assign(context=>{return{day:grammar[context.recResult].day};}),cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\"length\"},{cond:context=>\"help\"in(grammar[context.recResult]||{}),actions:[cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\".help\"},{actions:[cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\".nomatch\"}],TIMEOUT1:'.timeout1',TIMEOUT2:'.timeout2',TIMEOUT3:'.timeout3',TIMEOUT4:'.timeout4'}},say_ask_nomatch_timeout(say('On which day is your meating?'),\"You need to specify the day on which you meeting is to be held. Please pick a day of the week. \")),length:_objectSpread({initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"agreement\"in(boolean_grammar[context.recResult]||{}),actions:[cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\"whole_day\"},{cond:context=>\"disagreement\"in(boolean_grammar[context.recResult]||{}),actions:[cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\"time\"},{cond:context=>\"uncertain\"in(boolean_grammar[context.recResult]||{}),actions:[cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\".specific\"},{cond:context=>\"help\"in(grammar[context.recResult]||{}),actions:[cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\".help\"},{actions:[cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\".nomatch\"}],TIMEOUT1:'.timeout1',TIMEOUT2:'.timeout2',TIMEOUT3:'.timeout3',TIMEOUT4:'.timeout4'}},say_ask_nomatch_timeout(say('Will it take the whole day?'),\"You need to specify whether your meeting will take the whole day so that I can book it accordingly. Please answer with yes or no.\")),time:_objectSpread({initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"time\"in(grammar[context.recResult]||{}),actions:[assign(context=>{return{time:grammar[context.recResult].time};}),cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\"repetition\"},{cond:context=>\"help\"in(grammar[context.recResult]||{}),actions:[cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\".help\"},{actions:[cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\".nomatch\"}],TIMEOUT1:'.timeout1',TIMEOUT2:'.timeout2',TIMEOUT3:'.timeout3',TIMEOUT4:'.timeout4'}},say_ask_nomatch_timeout(say('At what time is your meeting?'),\"You need to specify the time when your meeting will start so that I can book it accordingly. Please tell me the time in military notation or, in other words, 24-hours format.\")),whole_day:_objectSpread({initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"agreement\"in(boolean_grammar[context.recResult]||{}),actions:[cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\"confirmation\"},{cond:context=>\"disagreement\"in(boolean_grammar[context.recResult]||{}),actions:[cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\".canceled\"},{cond:context=>\"help\"in(grammar[context.recResult]||{}),actions:[cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\".help\"},{actions:[cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\".nomatch\"}],TIMEOUT1:'.timeout1',TIMEOUT2:'.timeout2',TIMEOUT3:'.timeout3',TIMEOUT4:'.timeout4'}},say_ask_nomatch_timeout(send(context=>({type:\"SPEAK\",value:\"Just to confirm, do you want me to make an appointment with \".concat(context.person,\" on \").concat(context.day,\" for the whole day?\")})),\"This is just to confirm the details of your meeting, please say 'no' if you want to cancel it and 'yes' if you want to confirm the meeting.\")),repetition:_objectSpread({initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"agreement\"in(boolean_grammar[context.recResult]||{}),actions:[cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\"confirmation\"},{cond:context=>\"disagreement\"in(boolean_grammar[context.recResult]||{}),actions:[cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\".canceled\"},{cond:context=>\"unsure\"in(boolean_grammar[context.recResult]||{}),actions:[cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\".specific\"},{cond:context=>\"help\"in(grammar[context.recResult]||{}),actions:[cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\".help\"},{actions:[cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\".nomatch\"}],TIMEOUT1:'.timeout1',TIMEOUT2:'.timeout2',TIMEOUT3:'.timeout3',TIMEOUT4:'.timeout4'}},say_ask_nomatch_timeout(send(context=>({type:\"SPEAK\",value:\"Just to confirm, do you want me to make an appointment with \".concat(context.person,\" on \").concat(context.day,\" at \").concat(context.time,\"?\")})),\"This is just to confirm the details of your meeting, please say 'no' if you want to cancel it and 'yes' if you want to confirm it.\")),confirmation:_objectSpread({initial:\"prompt\",on:{RECOGNISED:[{cond:context=>\"agreement\"in(boolean_grammar[context.recResult]||{}),actions:[cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\".to_do\"},{cond:context=>\"disagreement\"in(boolean_grammar[context.recResult]||{}),actions:[cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\".idle\"},{cond:context=>\"unsure\"in(boolean_grammar[context.recResult]||{}),actions:[cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\".specific\"},{cond:context=>\"help\"in(grammar[context.recResult]||{}),actions:[cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\".help\"},{actions:[cancel('time1'),cancel('time2'),cancel('time3'),cancel('time4')],target:\".nomatch\"}],TIMEOUT1:'.timeout1',TIMEOUT2:'.timeout2',TIMEOUT3:'.timeout3',TIMEOUT4:'.timeout4'}},say_ask_nomatch_timeout(say('Your appointment has been scheduled! Do you want me to add it to your to do item?'),\"The appointment tool has not yet been developed, and I only need to ask this as a formality, please say yes.\"))}};","map":{"version":3,"sources":["C:/Users/R/Desktop/DialogueSystems/Lab2/react-xstate-colourchanger/src/dmAppointmentLab4.ts"],"names":["send","assign","actions","say","text","_context","type","value","listen","say_ask_nomatch_timeout","say_this","help_message","initial","states","prompt","entry","on","ENDSPEECH","ask1","delay","id","ask2","ask3","ask4","nomatch","timeout1","timeout2","timeout3","timeout4","idle","to_do","specific","canceled","help","proxyurl","rasaurl","nluRequest","fetch","Request","method","headers","body","then","data","json","grammar","person","day","time","boolean_grammar","agreement","Boolean","disagreement","uncertain","cancel","dmMachine","start_point","CLICK","appointment","who","RECOGNISED","cond","context","recResult","target","TIMEOUT1","TIMEOUT2","TIMEOUT3","TIMEOUT4","length","whole_day","repetition","confirmation"],"mappings":"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","sourcesContent":["import { MachineConfig, send, Action, assign, actions } from \"xstate\";\r\n\r\n\r\nexport function say(text: string): Action<SDSContext, SDSEvent> {\r\n    return send((_context: SDSContext) => ({ type: \"SPEAK\", value: text }))\r\n}\r\n\r\nexport function listen(): Action<SDSContext, SDSEvent> {\r\n    return send('LISTEN')\r\n}\r\n\r\n\r\n\r\nfunction say_ask_nomatch_timeout(say_this: Action<SDSContext, SDSEvent>, help_message: string): MachineConfig<SDSContext, any, SDSEvent> {\r\n    return ({ \r\n        initial: 'prompt',\r\n        states: {\r\n            prompt: {\r\n                entry: say_this,\r\n\r\n                on: { ENDSPEECH: 'ask1' }\r\n            },\r\n            ask1: {\r\n                entry: [send('LISTEN'), send ('TIMEOUT1', {delay: 4500, id: 'time1'})]\r\n            },\r\n            ask2: {\r\n                entry: [send('LISTEN'), send ('TIMEOUT2', {delay: 4500, id: 'time2'})]\r\n            },\r\n            ask3: {\r\n                entry: [send('LISTEN'), send ('TIMEOUT3', {delay: 4500, id: 'time3'})]\r\n            },\r\n            ask4: {\r\n                entry: [send('LISTEN'), send ('TIMEOUT4', {delay: 4500, id: 'time4'})]\r\n            },\r\n            nomatch: {\r\n                entry: say('Sorry, I did not manage to understand this one. Please repeat.'),\r\n                on: {ENDSPEECH: \"ask2\"}\r\n            },\r\n            timeout1: {\r\n                entry: say('I did not hear you this time, please speak louder.'),\r\n                on: {ENDSPEECH: \"ask2\"}\r\n            },\r\n            timeout2: {\r\n                entry: say('I still cannot hear you, please try again.'),\r\n                on: {ENDSPEECH: \"ask3\"}\r\n            },\r\n            timeout3: {\r\n                entry: say('Sorry, still nothing.'),\r\n                on: {ENDSPEECH: \"ask4\"}\r\n            },\r\n            timeout4: {\r\n                //Add idle state after 3 reprompts//\r\n                entry: say('Returning to idle.'),\r\n                on: {ENDSPEECH: \"idle\"}\r\n            },\r\n            idle:{\r\n                type: 'final'\r\n            },\r\n            to_do:{\r\n                entry: say('Sorry, this tool has not been developed yet. I will now return to idle state.'),\r\n                on: {ENDSPEECH: 'idle'}\r\n            },\r\n            specific:{\r\n                entry: say(\"Please be more specific\"),\r\n                on: {ENDSPEECH: \"ask2\"}\r\n            },\r\n            canceled:{\r\n                entry: say(\"Your appointment has been canceled. I will now returnto idle state.\")\r\n            },\r\n            help:{\r\n                entry: say(help_message),\r\n                on: {ENDSPEECH: \"ask2\"}\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nconst proxyurl = \"https://cors-anywhere.herokuapp.com/\";\r\nconst rasaurl = 'https://rafalappointment.herokuapp.com/model/parse'\r\nconst nluRequest = (text: string) =>\r\n    fetch(new Request(proxyurl + rasaurl, {\r\n        method: 'POST',\r\n        headers: { 'Origin': 'http://maraev.me' }, // only required with proxy\r\n        body: `{\"text\": \"${text}\"}`\r\n    }))\r\n        .then(data => data.json()); \r\n\r\nconst grammar: { [index: string]: { person?: string, day?: string, time?: string, help?: string } } = {\r\n    \"John\": { person: \"John Appleseed\" },\r\n    \"John Appleseed\": { person: \"John Appleseed\" },\r\n    \"Jack\": { person: \"Jack Jackson\" },\r\n    \"Jack Jackson\": { person: \"Jack Jackson\" },\r\n    \"Liana\": { person: \"Liana Jelena\" },\r\n    \"Liana Jelena\": { person: \"Liana Jelena\" },\r\n    \"Natalie\": { person: \"Natalie Portman\" },\r\n    \"Natalie Portman\": { person: \"Natalie Portman\" },\r\n    \"Bruce\": { person: \"Bruce W\" },\r\n    \"Bob\": { person: \"Bob the builder\" },\r\n    \"Bob the builder\": { person: \"Bob the builder\" },\r\n    \"Shrek\": { person: \"Shrek from the swamp\" },\r\n    \"Shrek from the swap\": { person: \"Shrek from the swamp\" },\r\n\r\n    \"on Monday\": {day: \"Monday\" },\r\n    \"Monday\": {day: \"Monday\" },\r\n    \"on Tuesday\": {day: \"Tuesday\" },\r\n    \"Tuesday\": {day: \"Tuesday\" },\r\n    \"on Wednesday\": {day: \"Wednesday\" },\r\n    \"Wednesday\": {day: \"Wednesday\" },\r\n    \"on Thursday\": {day: \"Thursday\" },\r\n    \"Thursday\": {day: \"Thursday\" },\r\n    \"on Friday\": {day: \"Friday\" },\r\n    \"Friday\": {day: \"Friday\" },\r\n    \"on Satudary\": {day: \"Satuday\" },\r\n    \"Satudary\": {day: \"Satuday\" },\r\n    \"on Sunday\": {day: \"Sunday\" },\r\n    \"Sunday\": {day: \"Sunday\" },\r\n\r\n    \"10\": { time: \"10:00\" },\r\n    \"at 10\": { time: \"10:00\" },\r\n    \"ten\": { time: \"10:00\" },\r\n    \"at ten\": { time: \"10:00\" },\r\n    \"11\": { time: \"11:00\" },\r\n    \"eleven\": { time: \"11:00\" },\r\n    \"at 11\": { time: \"11:00\" },\r\n    \"at eleven\": { time: \"11:00\" },\r\n    \"12\": { time: \"12:00\" },\r\n    \"twelve\": { time: \"12:00\" },\r\n    \"at 12\": { time: \"12:00\" },\r\n    \"at twelve\": { time: \"12:00\" },\r\n    \"13\": { time: \"13:00\" },\r\n    \"thirteen\": { time: \"13:00\" },\r\n    \"at 13\": { time: \"13:00\" },\r\n    \"at thirteen\": { time: \"13:00\" },\r\n    \"14\": { time: \"14:00\" },\r\n    \"fourteen\": { time: \"14:00\" },\r\n    \"at 14\": { time: \"14:00\" },\r\n    \"at fourteen\": { time: \"14:00\" },\r\n    \"15\": { time: \"15:00\" },\r\n    \"fifteen\": { time: \"15:00\" },\r\n    \"at 15\": { time: \"15:00\" },\r\n    \"at fifteen\": { time: \"15:00\" },\r\n    \"16\": { time: \"16:00\" },\r\n    \"sixteen\": { time: \"16:00\" },\r\n    \"at 16\": { time: \"16:00\" },\r\n    \"at sixteen\": { time: \"16:00\" },\r\n    \"17\": { time: \"17:00\" },\r\n    \"seventeen\": { time: \"17:00\" },\r\n    \"at 17\": { time: \"17:00\" },\r\n    \"at seventeen\": { time: \"17:00\" },\r\n    \"18\": { time: \"18:00\" },\r\n    \"eighteen\": { time: \"18:00\" },\r\n    \"at 18\": { time: \"18:00\" },\r\n    \"at eighteen\": { time: \"18:00\" },\r\n    \"19\": { time: \"19:00\" },\r\n    \"nineteen\": { time: \"19:00\" },\r\n    \"at 19\": { time: \"19:00\" },\r\n    \"at nineteen\": { time: \"19:00\" },\r\n    \"20\": { time: \"20:00\" },\r\n    \"twenty\": { time: \"20:00\" },\r\n    \"at 20\": { time: \"20:00\" },\r\n    \"at twenty\": { time: \"20:00\" },\r\n\r\n\r\n    \"help\": {help: \"help\"},\r\n    \"help me\": {help: \"help\"},\r\n    \"Help\": {help: \"help\"},\r\n    \"Help me\": {help: \"help\"},\r\n}\r\n\r\nconst boolean_grammar: {[index: string]: {agreement?: boolean, disagreement?: boolean, uncertain?: string}} = {\r\n    \"yes\": {agreement: Boolean(true)},\r\n    \"of course\": {agreement: Boolean(true)},\r\n    \"sure\": {agreement: Boolean(true)},\r\n    \"absolutely\": {agreement: Boolean(true)},\r\n    \"yes please\": {agreement: Boolean(true)},\r\n    \"no\": {disagreement: Boolean(false)},\r\n    \"no way\": {disagreement: Boolean(false)},\r\n    \"absolutely not\": {disagreement: Boolean(false)},\r\n    \"never\": {disagreement: Boolean(false)},\r\n    \"maybe\": {uncertain: \"unsure\"},\r\n    \"perhaps\": {uncertain: \"unsure\"},\r\n    \"I don't know\": {uncertain: \"unsure\"},\r\n    \"probably\": {uncertain: \"unsure\"},\r\n}\r\n\r\nconst {cancel} = actions\r\n\r\nexport const dmMachine: MachineConfig<SDSContext, any, SDSEvent> = ({\r\n    \r\n    initial: 'start_point',\r\n    states: {\r\n        start_point:{\r\n            id: 'starting_poing',\r\n            on: {\r\n                CLICK: 'appointment'\r\n            }\r\n        },\r\n        appointment:{\r\n            initial: 'prompt',\r\n            on:{ ENDSPEECH: 'who'\r\n            },\r\n            states:{\r\n                prompt:{\r\n                    entry: say(\"Let's create an appointment.\")\r\n                }\r\n            }\r\n        },\r\n            who: {\r\n                initial: \"prompt\",\r\n                on: {\r\n                    RECOGNISED: [{\r\n                        cond: (context) => \"person\" in (grammar[context.recResult] || {}),\r\n                        actions: [assign((context) => { return { person: grammar[context.recResult].person } }), cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                        target: \"day\"},\r\n\r\n                        {\r\n                        cond: (context) => \"help\" in (grammar[context.recResult] || {}),\r\n                        actions: [cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                        target: \".help\"\r\n                        },\r\n\r\n                    {target: \".nomatch\" }],\r\n                    \r\n                        TIMEOUT1: '.timeout1',\r\n                        TIMEOUT2: '.timeout2',\r\n                        TIMEOUT3: '.timeout3',\r\n                        TIMEOUT4: '.timeout4'\r\n                    \r\n                },\r\n                ...say_ask_nomatch_timeout(say('Who are you meeting with?'), \"Please specify the name of the person you are planning to meet up with. Pick someone from your contacts list.\")\r\n            },\r\n            day: {\r\n                initial: \"prompt\",\r\n                on: {\r\n                    RECOGNISED: [{\r\n                        cond: (context) => \"day\" in (grammar[context.recResult] || {}),\r\n                        actions: [assign((context) => {return{ day: grammar[context.recResult].day}}), cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                        target: \"length\"\r\n                    },\r\n\r\n                    {\r\n                        cond: (context) => \"help\" in (grammar[context.recResult] || {}),\r\n                        actions: [cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                        target: \".help\"\r\n                    },\r\n\r\n                    {actions: [cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                    target: \".nomatch\"}],\r\n\r\n                    TIMEOUT1: '.timeout1',\r\n                    TIMEOUT2: '.timeout2',\r\n                    TIMEOUT3: '.timeout3',\r\n                    TIMEOUT4: '.timeout4'\r\n                },\r\n                ...say_ask_nomatch_timeout(say('On which day is your meating?'), \"You need to specify the day on which you meeting is to be held. Please pick a day of the week. \") //Can add name specification\r\n            },\r\n            length: {\r\n                initial: \"prompt\" ,\r\n                on: {\r\n                    RECOGNISED: [{\r\n                        cond: (context) => \"agreement\" in (boolean_grammar[context.recResult] || {}),\r\n                        actions: [cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                        target: \"whole_day\"},\r\n\r\n                        {cond: (context) => \"disagreement\" in (boolean_grammar[context.recResult] || {}),\r\n                        actions: [cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                        target: \"time\"},\r\n\r\n                        {cond: (context) => \"uncertain\" in (boolean_grammar[context.recResult] || {}),\r\n                        actions: [cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                        target: \".specific\"},\r\n\r\n                        {cond: (context) => \"help\" in (grammar[context.recResult] || {}),\r\n                        actions: [cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                        target: \".help\"},\r\n\r\n                    {actions: [cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                        target:\".nomatch\"}],\r\n\r\n                    TIMEOUT1: '.timeout1',\r\n                    TIMEOUT2: '.timeout2',\r\n                    TIMEOUT3: '.timeout3',\r\n                    TIMEOUT4: '.timeout4'\r\n\r\n                    },\r\n                \r\n                    ...say_ask_nomatch_timeout(say('Will it take the whole day?'), \"You need to specify whether your meeting will take the whole day so that I can book it accordingly. Please answer with yes or no.\")\r\n            },\r\n            time: {\r\n                initial: \"prompt\" ,\r\n                on: {\r\n                    RECOGNISED: [{\r\n\r\n                    cond: (context) => \"time\" in (grammar[context.recResult] || {}),\r\n                    actions: [assign((context) => {return{ time: grammar[context.recResult].time}}), cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                    target: \"repetition\"},\r\n\r\n                    {cond: (context) => \"help\" in (grammar[context.recResult] || {}),\r\n                    actions: [cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                    target: \".help\"},\r\n\r\n                    {\r\n                    actions: [cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                    target: \".nomatch\"\r\n                    }],\r\n\r\n                    TIMEOUT1: '.timeout1',\r\n                    TIMEOUT2: '.timeout2',\r\n                    TIMEOUT3: '.timeout3',\r\n                    TIMEOUT4: '.timeout4'\r\n                },\r\n                ...say_ask_nomatch_timeout(say('At what time is your meeting?'), \"You need to specify the time when your meeting will start so that I can book it accordingly. Please tell me the time in military notation or, in other words, 24-hours format.\")\r\n            },\r\n            whole_day: {\r\n                initial: \"prompt\" ,\r\n                on: {\r\n                    RECOGNISED: [{\r\n                        cond: (context) => \"agreement\" in (boolean_grammar[context.recResult] || {}),\r\n                        actions: [cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                        target: \"confirmation\"},\r\n                        {\r\n                        cond: (context) => \"disagreement\" in (boolean_grammar[context.recResult] || {}),\r\n                        actions: [cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                        target: \".canceled\"},\r\n\r\n                        {cond: (context) => \"help\" in (grammar[context.recResult] || {}),\r\n                        actions: [cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                        target: \".help\"},\r\n\r\n                    {\r\n                    actions: [cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                    target: \".nomatch\"}],\r\n\r\n                    TIMEOUT1: '.timeout1',\r\n                    TIMEOUT2: '.timeout2',\r\n                    TIMEOUT3: '.timeout3',\r\n                    TIMEOUT4: '.timeout4'\r\n                },\r\n                ...say_ask_nomatch_timeout(send((context) => ({\r\n                    type: \"SPEAK\",\r\n                    value: `Just to confirm, do you want me to make an appointment with ${context.person} on ${context.day} for the whole day?`})), \r\n                    \"This is just to confirm the details of your meeting, please say 'no' if you want to cancel it and 'yes' if you want to confirm the meeting.\")\r\n                },\r\n            repetition: {\r\n                initial: \"prompt\" ,\r\n                on: {\r\n                    RECOGNISED: [{\r\n                        cond: (context) => \"agreement\" in (boolean_grammar[context.recResult] || {}),\r\n                        actions: [cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                        target: \"confirmation\"},\r\n                        \r\n                        {\r\n                        cond: (context) => \"disagreement\" in (boolean_grammar[context.recResult] || {}),\r\n                        actions: [cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                        target: \".canceled\"},\r\n\r\n                        {cond: (context) => \"unsure\" in (boolean_grammar[context.recResult] || {}),\r\n                        actions: [cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                        target: \".specific\"},\r\n\r\n                        {cond: (context) => \"help\" in (grammar[context.recResult] || {}),\r\n                        actions: [cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                        target: \".help\"},\r\n\r\n                    {\r\n                        actions: [cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                        target: \".nomatch\"}],\r\n\r\n                    TIMEOUT1: '.timeout1',\r\n                    TIMEOUT2: '.timeout2',\r\n                    TIMEOUT3: '.timeout3',\r\n                    TIMEOUT4: '.timeout4'\r\n                },\r\n                ...say_ask_nomatch_timeout(send((context) => ({\r\n                    type: \"SPEAK\",\r\n                    value: `Just to confirm, do you want me to make an appointment with ${context.person} on ${context.day} at ${context.time}?`})),\r\n                     \"This is just to confirm the details of your meeting, please say 'no' if you want to cancel it and 'yes' if you want to confirm it.\") \r\n                },\r\n            confirmation: {\r\n                initial: \"prompt\" ,\r\n                on: {\r\n                     RECOGNISED: [{\r\n                        cond: (context) => \"agreement\" in (boolean_grammar[context.recResult] || {}),\r\n                        actions: [cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                        target: \".to_do\"},\r\n                        {\r\n                        cond: (context) => \"disagreement\" in (boolean_grammar[context.recResult] || {}),\r\n                        actions: [cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                        target: \".idle\"},\r\n                        {\r\n                        cond: (context) => \"unsure\" in (boolean_grammar[context.recResult] || {}),\r\n                        actions: [cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                        target: \".specific\"},\r\n\r\n                        {cond: (context) => \"help\" in (grammar[context.recResult] || {}),\r\n                        actions: [cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                        target: \".help\"},\r\n\r\n                    {\r\n                        actions: [cancel('time1'), cancel('time2'), cancel('time3'), cancel('time4')],\r\n                        target: \".nomatch\"}],\r\n\r\n                    TIMEOUT1: '.timeout1',\r\n                    TIMEOUT2: '.timeout2',\r\n                    TIMEOUT3: '.timeout3',\r\n                    TIMEOUT4: '.timeout4'\r\n                },\r\n                ...say_ask_nomatch_timeout(say('Your appointment has been scheduled! Do you want me to add it to your to do item?'), \r\n                \"The appointment tool has not yet been developed, and I only need to ask this as a formality, please say yes.\")\r\n                }\r\n            },\r\n        }\r\n)"]},"metadata":{},"sourceType":"module"}